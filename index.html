<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRETA - ì°½ì‘ìë¥¼ ìœ„í•œ í”Œë«í¼</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ë¡œë”© í™”ë©´ -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="logo">
                <span class="logo-icon">ğŸ¨</span>
                <span class="logo-text">CRETA</span>
            </div>
            <div class="loading-spinner"></div>
            <p>ì°½ì‘ì˜ ì„¸ê³„ë¡œ ì…ì¥ ì¤‘...</p>
        </div>
    </div>

    <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ (ìƒˆë¡œìš´ ë””ìì¸) -->
    <div id="authModal" class="modal auth-modal-overlay" style="display: none;">
        <div class="auth-modal-content">
            <button class="auth-modal-close" onclick="hideAuthModal()">
                <svg width="16" height="16" viewBox="0 0 16 16">
                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            
            <div class="auth-header">
                <div class="auth-logo">
                    <span class="logo-icon">ğŸ¨</span>
                    <span class="logo-text">CRETA</span>
                </div>
            </div>

            <div class="auth-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="showLogin()" data-tab="login">ë¡œê·¸ì¸</button>
                    <button class="auth-tab" onclick="showSignup()" data-tab="signup">íšŒì›ê°€ì…</button>
                </div>

                <!-- ë¡œê·¸ì¸ í¼ -->
                <div id="loginForm" class="auth-form">
                    <div class="form-group">
                        <input type="email" id="loginEmail" placeholder="ì´ë©”ì¼" class="auth-input">
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" class="auth-input">
                    </div>
                    
                    <div class="auth-options">
                        <label class="checkbox-container">
                            <input type="checkbox" id="keepLoggedIn">
                            <span class="checkmark"></span>
                            ìë™ ë¡œê·¸ì¸
                        </label>
                        <a href="#" class="forgot-password">ID/PASS ì°¾ê¸°</a>
                    </div>

                    <button class="btn auth-primary-btn" onclick="loginUser()">ë¡œê·¸ì¸</button>
                    
                    <div class="social-divider">
                        <span>ë˜ëŠ” ì•„ë˜ ë°©ë²•ìœ¼ë¡œ íšŒì›ê°€ì… í•˜ì„¸ìš”</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn kakao-btn" onclick="loginWithKakao()">
                            <span class="social-icon">ğŸ’¬</span>
                            ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn naver-btn" onclick="loginWithNaver()">
                            <span class="social-icon">N</span>
                            ë„¤ì´ë²„ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn apple-btn" onclick="loginWithApple()">
                            <span class="social-icon">ğŸ</span>
                            Appleë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn google-btn" onclick="loginWithGoogle()">
                            <span class="social-icon">ğŸ”µ</span>
                            ìœ ì‹¬ì‹¬ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </div>

                <!-- íšŒì›ê°€ì… í¼ -->
                <div id="signupForm" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <input type="text" id="signupName" placeholder="ë‹‰ë„¤ì„" class="auth-input">
                    </div>
                    <div class="form-group">
                        <input type="email" id="signupEmail" placeholder="ì´ë©”ì¼" class="auth-input">
                    </div>
                    <div class="form-group">
                        <input type="password" id="signupPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ (6ì ì´ìƒ)" class="auth-input">
                    </div>

                    <button class="btn auth-primary-btn" onclick="signupUser()">íšŒì›ê°€ì…</button>
                    
                    <div class="social-divider">
                        <span>ë˜ëŠ” ì•„ë˜ ë°©ë²•ìœ¼ë¡œ íšŒì›ê°€ì… í•˜ì„¸ìš”</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn kakao-btn" onclick="signupWithKakao()">
                            <span class="social-icon">ğŸ’¬</span>
                            ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn naver-btn" onclick="signupWithNaver()">
                            <span class="social-icon">N</span>
                            ë„¤ì´ë²„ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn apple-btn" onclick="signupWithApple()">
                            <span class="social-icon">ğŸ</span>
                            Appleë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <button class="social-btn google-btn" onclick="signupWithGoogle()">
                            <span class="social-icon">ğŸ”µ</span>
                            ìœ ì‹¬ì‹¬ë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì•± -->
    <div class="app-container" id="mainApp" style="display: none;">
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ¨</span>
                    <span class="logo-text">CRETA</span>
                </div>
                <!-- í™ˆí™”ë©´ ê²€ìƒ‰ì°½ ì œê±° -->
                <div class="header-actions">
                    <button class="notification-btn">
                        <span class="icon">ğŸ””</span>
                        <span class="badge">3</span>
                    </button>
                    <div class="user-avatar" onclick="showProfile()">
                        <span id="userAvatarText">ë¡œê·¸ì¸</span>
                    </div>
                    <button class="logout-btn" onclick="logoutUser()" style="display: none;">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </header>

        <div class="main-layout">
            <nav class="sidebar">
                <button class="nav-item active" onclick="showScreen('home')" data-screen="home">
                    <div class="nav-icon">ğŸ </div>
                    <span>í™ˆ</span>
                </button>
                <button class="nav-item" onclick="showScreen('explore')" data-screen="explore">
                    <div class="nav-icon">ğŸ”</div>
                    <span>íƒìƒ‰</span>
                </button>
                <button class="nav-item" onclick="showScreen('community')" data-screen="community">
                    <div class="nav-icon">ğŸ‘¥</div>
                    <span>ì»¤ë®¤ë‹ˆí‹°</span>
                </button>
                <button class="nav-item" onclick="showScreen('messages')" data-screen="messages">
                    <div class="nav-icon">ğŸ’¬</div>
                    <span>ë©”ì‹œì§€</span>
                    <span class="nav-badge">2</span>
                </button>
                <button class="nav-item" onclick="showScreen('profile')" data-screen="profile">
                    <div class="nav-icon">ğŸ‘¤</div>
                    <span>í”„ë¡œí•„</span>
                </button>
                <div class="nav-divider"></div>
                <button class="nav-item upload-btn" onclick="showUploadModal()">
                    <div class="nav-icon create-icon">â•</div>
                    <span>ì‘í’ˆ ì—…ë¡œë“œ</span>
                </button>
            </nav>

            <main class="content-area">
                <!-- í™ˆ í™”ë©´ (ë‹¤ì–‘í•œ ì„¹ì…˜ ì¶”ê°€) -->
                <div id="home" class="screen active">
                    <div class="welcome-banner">
                        <h1>ğŸ¨ í™˜ì˜í•©ë‹ˆë‹¤, <span id="welcomeUserName">ì°½ì‘ì</span>ë‹˜!</h1>
                        <p>CRETAì—ì„œ ì—¬ëŸ¬ë¶„ì˜ ì°½ì‘ ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”</p>
                    </div>

                    <!-- ìµœì‹  ì—…ë¡œë“œ ì‘í’ˆ -->
                    <section class="works-section">
                        <div class="section-header">
                            <h2>ğŸ”¥ ìµœì‹  ì—…ë¡œë“œ ì‘í’ˆ</h2>
                            <button class="see-more-btn" onclick="showScreen('explore')">ë”ë³´ê¸°</button>
                        </div>
                        <div class="works-grid" id="latestWorksContainer">
                            <div class="empty-state">
                                <div class="empty-icon">ğŸ“</div>
                                <h3>ì•„ì§ ì—…ë¡œë“œëœ ì‘í’ˆì´ ì—†ì–´ìš”</h3>
                                <p>ì²« ë²ˆì§¸ ì‘í’ˆì„ ì—…ë¡œë“œí•´ë³´ì„¸ìš”!</p>
                                <button class="btn btn-primary" onclick="showUploadModal()">ì‘í’ˆ ì—…ë¡œë“œí•˜ê¸°</button>
                            </div>
                        </div>
                    </section>

                    <!-- ì¸ê¸° ê¸‰ìƒìŠ¹ ì‘í’ˆ -->
                    <section class="works-section">
                        <div class="section-header">
                            <h2>ğŸ“ˆ ì¸ê¸° ê¸‰ìƒìŠ¹ ì‘í’ˆ</h2>
                            <button class="see-more-btn" onclick="exploreByCategory('trending')">ë”ë³´ê¸°</button>
                        </div>
                        <div class="works-grid" id="trendingWorksContainer">
                            <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                        </div>
                    </section>

                    <!-- ìŠ¤í…Œë””ì…€ëŸ¬ -->
                    <section class="works-section">
                        <div class="section-header">
                            <h2>â­ ìŠ¤í…Œë””ì…€ëŸ¬</h2>
                            <button class="see-more-btn" onclick="exploreByCategory('steady')">ë”ë³´ê¸°</button>
                        </div>
                        <div class="works-grid" id="steadyWorksContainer">
                            <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                        </div>
                    </section>

                    <!-- ì´ì£¼ì˜ ë² ìŠ¤íŠ¸ -->
                    <section class="works-section">
                        <div class="section-header">
                            <h2>ğŸ† ì´ì£¼ì˜ ë² ìŠ¤íŠ¸</h2>
                            <button class="see-more-btn" onclick="exploreByCategory('weekly')">ë”ë³´ê¸°</button>
                        </div>
                        <div class="works-grid" id="weeklyBestContainer">
                            <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                        </div>
                    </section>
                </div>

                <!-- íƒìƒ‰ í™”ë©´ (ì—°ê´€ê²€ìƒ‰ì–´, ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´ ì¶”ê°€) -->
                <div id="explore" class="screen">
                    <div class="explore-container">
                        <div class="explore-header">
                            <h1>ğŸ” ì‘í’ˆ íƒìƒ‰</h1>
                            <div class="search-section">
                                <div class="search-container">
                                    <span class="search-icon">ğŸ”</span>
                                    <input type="text" class="search-input" placeholder="ì‘í’ˆ, ì‘ê°€, íƒœê·¸ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”..." 
                                           id="exploreSearchInput" onkeypress="handleExploreSearch(event)" 
                                           oninput="showSuggestions()" onfocus="showSearchPanel()">
                                    <button class="search-clear" onclick="clearExploreSearch()" style="display: none;">âœ•</button>
                                </div>
                                
                                <!-- ê²€ìƒ‰ íŒ¨ë„ -->
                                <div class="search-panel" id="searchPanel" style="display: none;">
                                    <div class="search-panel-content">
                                        <div class="search-left">
                                            <h3>ì—°ê´€ ê²€ìƒ‰ì–´</h3>
                                            <div class="suggestions-list" id="suggestionsList">
                                                <div class="suggestion-item" onclick="selectSuggestion('í•˜ì´í')">í•˜ì´í</div>
                                                <div class="suggestion-item" onclick="selectSuggestion('ì§„ê²©ì˜ê±°ì¸')">ì§„ê²©ì˜ê±°ì¸</div>
                                                <div class="suggestion-item" onclick="selectSuggestion('ì›í”¼ìŠ¤')">ì›í”¼ìŠ¤</div>
                                                <div class="suggestion-item" onclick="selectSuggestion('ë‚˜ë£¨í† ')">ë‚˜ë£¨í† </div>
                                                <div class="suggestion-item" onclick="selectSuggestion('ê·€ë©¸ì˜ì¹¼ë‚ ')">ê·€ë©¸ì˜ì¹¼ë‚ </div>
                                            </div>
                                        </div>
                                        <div class="search-right">
                                            <h3>ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´</h3>
                                            <div class="realtime-keywords" id="realtimeKeywords">
                                                <div class="keyword-item">
                                                    <span class="rank">1</span>
                                                    <span class="keyword" onclick="selectSuggestion('íƒ„ì§€ë¡œ')">íƒ„ì§€ë¡œ</span>
                                                    <span class="trend up">â†‘</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">2</span>
                                                    <span class="keyword" onclick="selectSuggestion('ë¯¸ë£¨ ì—…ê³„')">ë¯¸ë£¨ ì—…ê³„</span>
                                                    <span class="trend up">â†‘</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">3</span>
                                                    <span class="keyword" onclick="selectSuggestion('ë¼ì›ìŠ¤')">ë¼ì›ìŠ¤</span>
                                                    <span class="trend down">â†“</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">4</span>
                                                    <span class="keyword" onclick="selectSuggestion('ê°•ì² ìš¸')">ê°•ì² ìš¸</span>
                                                    <span class="trend down">â†“</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">5</span>
                                                    <span class="keyword" onclick="selectSuggestion('ë‚¨ì¹œ ë°œì–¸')">ë‚¨ì¹œ ë°œì–¸</span>
                                                    <span class="trend up">â†‘</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">6</span>
                                                    <span class="keyword" onclick="selectSuggestion('ì†Œì•„ ì´')">ì†Œì•„ ì´</span>
                                                    <span class="trend up">â†‘</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">7</span>
                                                    <span class="keyword" onclick="selectSuggestion('ëŒ€ëª¬ë˜ìŠ¤')">ëŒ€ëª¬ë˜ìŠ¤</span>
                                                    <span class="trend up">â†‘</span>
                                                </div>
                                                <div class="keyword-item">
                                                    <span class="rank">8</span>
                                                    <span class="keyword" onclick="selectSuggestion('ë°”ë¹„')">ë°”ë¹„</span>
                                                    <span class="trend down">â†“</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì¸ê¸° íƒœê·¸ -->
                            <div class="trending-section" id="trendingSection">
                                <h3>ğŸ”¥ ì¸ê¸° íƒœê·¸</h3>
                                <div class="tag-list">
                                    <span class="tag" onclick="searchByTag('í•˜ì´í')">#í•˜ì´í</span>
                                    <span class="tag" onclick="searchByTag('ì§„ê²©ì˜ê±°ì¸')">#ì§„ê²©ì˜ê±°ì¸</span>
                                    <span class="tag" onclick="searchByTag('ì›í”¼ìŠ¤')">#ì›í”¼ìŠ¤</span>
                                    <span class="tag" onclick="searchByTag('ë‚˜ë£¨í† ')">#ë‚˜ë£¨í† </span>
                                    <span class="tag" onclick="searchByTag('ê·€ë©¸ì˜ì¹¼ë‚ ')">#ê·€ë©¸ì˜ì¹¼ë‚ </span>
                                    <span class="tag" onclick="searchByTag('íŒ¬ì•„íŠ¸')">#íŒ¬ì•„íŠ¸</span>
                                    <span class="tag" onclick="searchByTag('ì¼ëŸ¬ìŠ¤íŠ¸')">#ì¼ëŸ¬ìŠ¤íŠ¸</span>
                                    <span class="tag" onclick="searchByTag('ì†Œì„¤')">#ì†Œì„¤</span>
                                </div>
                            </div>
                            
                            <!-- ì •ë ¬ ë²„íŠ¼ -->
                            <div class="sort-section">
                                <div class="sort-buttons">
                                    <button class="sort-btn active" onclick="changeSortOrder('popular')" data-sort="popular">
                                        <span class="sort-icon">ğŸ”¥</span>ì¸ê¸°ìˆœ
                                    </button>
                                    <button class="sort-btn" onclick="changeSortOrder('latest')" data-sort="latest">
                                        <span class="sort-icon">ğŸ•</span>ìµœì‹ ìˆœ
                                    </button>
                                    <button class="sort-btn" onclick="changeSortOrder('trending')" data-sort="trending">
                                        <span class="sort-icon">ğŸ“ˆ</span>íŠ¸ë Œë”©
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ê²€ìƒ‰ ê²°ê³¼ -->
                        <div class="explore-results">
                            <div class="works-grid postype-style" id="exploreResults">
                                <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì»¤ë®¤ë‹ˆí‹° í™”ë©´ (ê²Œì‹œë¬¼ ê¸°ëŠ¥ ê°•í™”) -->
                <div id="community" class="screen">
                    <div class="community-container">
                        <div class="community-header">
                            <h1>ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°</h1>
                            <button class="create-community-btn" onclick="showCreateCommunityModal()">
                                <span class="icon">â•</span>ì»¤ë®¤ë‹ˆí‹° ë§Œë“¤ê¸°
                            </button>
                        </div>
                        
                        <div class="community-filters">
                            <button class="community-filter active" onclick="filterCommunities('all')" data-filter="all">
                                ğŸŒŸ ì „ì²´
                            </button>
                            <button class="community-filter" onclick="filterCommunities('animation')" data-filter="animation">
                                ğŸ¬ ì• ë‹ˆë©”ì´ì…˜
                            </button>
                            <button class="community-filter" onclick="filterCommunities('illustration')" data-filter="illustration">
                                ğŸ¨ ì¼ëŸ¬ìŠ¤íŠ¸
                            </button>
                            <button class="community-filter" onclick="filterCommunities('novel')" data-filter="novel">
                                ğŸ“š ì†Œì„¤
                            </button>
                            <button class="community-filter" onclick="filterCommunities('manga')" data-filter="manga">
                                ğŸ“– ë§Œí™”
                            </button>
                        </div>
                        
                        <div class="communities-list" id="communitiesList">
                            <!-- ì»¤ë®¤ë‹ˆí‹° ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                    </div>

                    <!-- ì»¤ë®¤ë‹ˆí‹° ìƒì„± ëª¨ë‹¬ -->
                    <div id="createCommunityModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>ìƒˆ ì»¤ë®¤ë‹ˆí‹° ë§Œë“¤ê¸°</h2>
                                <button class="modal-close" onclick="hideCreateCommunityModal()">âœ•</button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label>ì»¤ë®¤ë‹ˆí‹° ì´ë¦„</label>
                                    <input type="text" id="communityName" placeholder="ì»¤ë®¤ë‹ˆí‹° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                                </div>
                                <div class="form-group">
                                    <label>ì¹´í…Œê³ ë¦¬</label>
                                    <select id="communityCategory">
                                        <option value="animation">ğŸ¬ ì• ë‹ˆë©”ì´ì…˜</option>
                                        <option value="illustration">ğŸ¨ ì¼ëŸ¬ìŠ¤íŠ¸</option>
                                        <option value="novel">ğŸ“š ì†Œì„¤</option>
                                        <option value="manga">ğŸ“– ë§Œí™”</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>ì»¤ë®¤ë‹ˆí‹° ì†Œê°œ</label>
                                    <textarea id="communityDescription" placeholder="ì»¤ë®¤ë‹ˆí‹°ì— ëŒ€í•´ ê°„ë‹¨íˆ ì†Œê°œí•´ì£¼ì„¸ìš”"></textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="hideCreateCommunityModal()">ì·¨ì†Œ</button>
                                <button class="btn btn-primary" onclick="createCommunity()">ë§Œë“¤ê¸°</button>
                            </div>
                        </div>
                    </div>

                    <!-- ê²Œì‹œë¬¼ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
                    <div id="postDetailModal" class="modal" style="display: none;">
                        <div class="modal-content post-detail-modal">
                            <div class="modal-header">
                                <h2 id="postDetailTitle">ê²Œì‹œë¬¼ ì œëª©</h2>
                                <button class="modal-close" onclick="hidePostDetail()">âœ•</button>
                            </div>
                            <div class="modal-body">
                                <div class="post-detail-content" id="postDetailContent">
                                    <!-- ê²Œì‹œë¬¼ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                                </div>
                                
                                <!-- ê²Œì‹œë¬¼ ì•¡ì…˜ -->
                                <div class="post-actions">
                                    <button class="action-btn like-btn" onclick="toggleLike()">
                                        <span class="icon">â¤ï¸</span>
                                        <span class="count" id="likeCount">0</span>
                                    </button>
                                    <button class="action-btn comment-btn" onclick="focusCommentInput()">
                                        <span class="icon">ğŸ’¬</span>
                                        <span class="count" id="commentCount">0</span>
                                    </button>
                                    <button class="action-btn bookmark-btn" onclick="toggleBookmark()">
                                        <span class="icon">ğŸ”–</span>
                                        <span class="count" id="bookmarkCount">0</span>
                                    </button>
                                    <button class="action-btn share-btn" onclick="sharePost()">
                                        <span class="icon">ğŸ“¤</span>
                                        <span class="text">ê³µìœ </span>
                                    </button>
                                </div>

                                <!-- ëŒ“ê¸€ ì„¹ì…˜ -->
                                <div class="comments-section">
                                    <div class="comments-header">
                                        <h4>ëŒ“ê¸€</h4>
                                    </div>
                                    <div class="comments-list" id="commentsList">
                                        <!-- ëŒ“ê¸€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                                    </div>
                                    <div class="comment-input-section">
                                        <div class="comment-input-wrapper">
                                            <input type="text" id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="handleCommentInput(event)">
                                            <button class="comment-submit" onclick="submitComment()">ì‘ì„±</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë©”ì‹œì§€ í™”ë©´ (ê¸°ëŠ¥ ê°•í™”) -->
                <div id="messages" class="screen">
                    <div class="messages-layout">
                        <div class="chat-sidebar">
                            <div class="chat-header">
                                <h2>ğŸ’¬ ë©”ì‹œì§€</h2>
                                <button class="new-chat-btn" onclick="showNewChatModal()">âœï¸</button>
                            </div>
                            <div class="chat-search">
                                <input type="text" placeholder="ì±„íŒ…ë°© ê²€ìƒ‰..." oninput="searchChats()" id="chatSearchInput">
                            </div>
                            <div class="chat-list" id="chatRoomsList">
                                <!-- ì±„íŒ…ë°© ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                        
                        <div class="chat-main">
                            <div class="chat-top-bar" id="chatTopBar">
                                <div class="chat-user">
                                    <div class="chat-avatar">ğŸ‘¤</div>
                                    <div class="chat-user-info">
                                        <h3>ì±„íŒ…ë°©ì„ ì„ íƒí•˜ì„¸ìš”</h3>
                                        <span class="status">ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”</span>
                                    </div>
                                </div>
                                <div class="chat-actions">
                                    <button class="chat-action">ğŸ“</button>
                                    <button class="chat-action">ğŸ“¹</button>
                                    <button class="chat-action">â„¹ï¸</button>
                                </div>
                            </div>
                            
                            <div class="chat-messages" id="chatMessages">
                                <div class="welcome-message">
                                    <div class="welcome-icon">ğŸ’¬</div>
                                    <h3>ì‹¤ì‹œê°„ ì±„íŒ…ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</h3>
                                    <p>ë‹¤ë¥¸ ì°½ì‘ìë“¤ê³¼ ì†Œí†µí•˜ê³  ì•„ì´ë””ì–´ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”</p>
                                </div>
                            </div>
                            
                            <div class="chat-input-area">
                                <button class="attachment-btn" onclick="attachFile()">ğŸ“</button>
                                <div class="input-wrapper">
                                    <input type="text" id="messageInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." 
                                           onkeypress="handleMessageInput(event)">
                                    <button class="emoji-btn" onclick="showEmojiPicker()">ğŸ˜Š</button>
                                </div>
                                <button class="send-btn" onclick="sendMessage()">â¤</button>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒˆ ì±„íŒ… ëª¨ë‹¬ -->
                    <div id="newChatModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>ìƒˆ ì±„íŒ… ì‹œì‘</h2>
                                <button class="modal-close" onclick="hideNewChatModal()">âœ•</button>
                            </div>
                            <div class="modal-body">
                                <div class="search-users">
                                    <input type="text" placeholder="ì‚¬ìš©ì ê²€ìƒ‰..." id="userSearchInput" oninput="searchUsers()">
                                </div>
                                <div class="users-list" id="usersList">
                                    <!-- ì‚¬ìš©ì ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì´ëª¨ì§€ í”¼ì»¤ -->
                    <div id="emojiPicker" class="emoji-picker" style="display: none;">
                        <div class="emoji-grid">
                            <span class="emoji" onclick="insertEmoji('ğŸ˜€')">ğŸ˜€</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜ƒ')">ğŸ˜ƒ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜„')">ğŸ˜„</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜†')">ğŸ˜†</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜…')">ğŸ˜…</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜‚')">ğŸ˜‚</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤£')">ğŸ¤£</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¥²')">ğŸ¥²</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜‡')">ğŸ˜‡</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ™‚')">ğŸ™‚</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ™ƒ')">ğŸ™ƒ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜‰')">ğŸ˜‰</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜Œ')">ğŸ˜Œ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¥°')">ğŸ¥°</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜˜')">ğŸ˜˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜—')">ğŸ˜—</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜™')">ğŸ˜™</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜š')">ğŸ˜š</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜‹')">ğŸ˜‹</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜›')">ğŸ˜›</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜œ')">ğŸ˜œ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤ª')">ğŸ¤ª</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤¨')">ğŸ¤¨</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ§')">ğŸ§</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤“')">ğŸ¤“</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¥¸')">ğŸ¥¸</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤©')">ğŸ¤©</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¥³')">ğŸ¥³</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜’')">ğŸ˜’</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜”')">ğŸ˜”</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜Ÿ')">ğŸ˜Ÿ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜•')">ğŸ˜•</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ™')">ğŸ™</span>
                            <span class="emoji" onclick="insertEmoji('â˜¹ï¸')">â˜¹ï¸</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜£')">ğŸ˜£</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜–')">ğŸ˜–</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜«')">ğŸ˜«</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜©')">ğŸ˜©</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¥º')">ğŸ¥º</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜¢')">ğŸ˜¢</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ˜­')">ğŸ˜­</span>
                            <span class="emoji" onclick="insertEmoji('â¤ï¸')">â¤ï¸</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’•')">ğŸ’•</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’–')">ğŸ’–</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’—')">ğŸ’—</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’™')">ğŸ’™</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’š')">ğŸ’š</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’›')">ğŸ’›</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ§¡')">ğŸ§¡</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’œ')">ğŸ’œ</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ–¤')">ğŸ–¤</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤')">ğŸ¤</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ¤')">ğŸ¤</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’”')">ğŸ’”</span>
                            <span class="emoji" onclick="insertEmoji('â£ï¸')">â£ï¸</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ’¯')">ğŸ’¯</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                            <span class="emoji" onclick="insertEmoji('ğŸ™')">ğŸ™</span>
                        </div>
                    </div>

                    <!-- íŒŒì¼ ì—…ë¡œë“œ ëª¨ë‹¬ -->
                    <div id="fileUploadModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>íŒŒì¼ ì²¨ë¶€</h2>
                                <button class="modal-close" onclick="hideFileUploadModal()">âœ•</button>
                            </div>
                            <div class="modal-body">
                                <div class="file-upload-area" onclick="document.getElementById('fileInput').click()">
                                    <div class="upload-icon">ğŸ“</div>
                                    <p>í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                                    <input type="file" id="fileInput" style="display: none;" multiple accept="image/*,video/*,audio/*,.pdf,.doc,.docx" onchange="handleFileSelect()">
                                </div>
                                <div class="selected-files" id="selectedFiles">
                                    <!-- ì„ íƒëœ íŒŒì¼ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="hideFileUploadModal()">ì·¨ì†Œ</button>
                                <button class="btn btn-primary" onclick="uploadFiles()">ì „ì†¡</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- í”„ë¡œí•„ í™”ë©´ -->
                <div id="profile" class="screen">
                    <div class="profile-container">
                        <div class="profile-banner">
                            <div class="profile-main">
                                <div class="profile-avatar-large" id="profileAvatar">ğŸ‘¤</div>
                                <div class="profile-info">
                                    <h1 id="profileName">ì‚¬ìš©ì</h1>
                                    <p class="profile-bio" id="profileEmail">ì´ë©”ì¼</p>
                                    <div class="profile-stats">
                                        <div class="stat">
                                            <span class="stat-number" id="userWorks">0</span>
                                            <span class="stat-label">ì‘í’ˆ</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-number">0</span>
                                            <span class="stat-label">íŒ”ë¡œì›Œ</span>
                                        </div>
                                        <div class="stat">
                                            <span class="stat-number">0</span>
                                            <span class="stat-label">íŒ”ë¡œì‰</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="user-works-section">
                            <h3>ë‚´ ì‘í’ˆ</h3>
                            <div class="user-works-grid" id="userWorksContainer">
                                <div class="empty-state">
                                    <div class="empty-icon">ğŸ¨</div>
                                    <h3>ì•„ì§ ì—…ë¡œë“œí•œ ì‘í’ˆì´ ì—†ì–´ìš”</h3>
                                    <p>ì²« ì‘í’ˆì„ ì—…ë¡œë“œí•´ë³´ì„¸ìš”!</p>
                                    <button class="btn btn-primary" onclick="showUploadModal()">ì‘í’ˆ ì—…ë¡œë“œ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ì‘í’ˆ ì—…ë¡œë“œ ëª¨ë‹¬ -->
    <div id="uploadModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âœ¨ ìƒˆ ì‘í’ˆ ì—…ë¡œë“œ</h2>
                <button class="modal-close" onclick="hideUploadModal()">âœ•</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ì‘í’ˆ ì œëª© *</label>
                    <input type="text" id="workTitle" placeholder="ë©‹ì§„ ì‘í’ˆ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div class="form-group">
                    <label>ì‘í’ˆ ì„¤ëª…</label>
                    <textarea id="workDescription" placeholder="ì‘í’ˆì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬</label>
                    <select id="workCategory">
                        <option value="illustration">ğŸ¨ ì¼ëŸ¬ìŠ¤íŠ¸</option>
                        <option value="animation">ğŸ¬ ì• ë‹ˆë©”ì´ì…˜</option>
                        <option value="novel">ğŸ“š ì†Œì„¤</option>
                        <option value="manga">ğŸ“– ë§Œí™”</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ì‘í’ˆ ì´ë¯¸ì§€ *</label>
                    <input type="file" id="workImage" accept="image/*" onchange="previewImage()">
                    <div id="imagePreview" class="image-preview"></div>
                </div>
                <div class="form-group">
                    <label>íƒœê·¸</label>
                    <input type="text" id="workTags" placeholder="íƒœê·¸ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: í•˜ì´í, íŒ¬ì•„íŠ¸, ì• ë‹ˆë©”ì´ì…˜)">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideUploadModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="uploadWork()">
                    <span class="upload-icon">ğŸ“¤</span>
                    ì—…ë¡œë“œ
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, doc, setDoc, serverTimestamp, query, orderBy, where, onSnapshot, updateDoc, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAYrLmXnpMPd0FjGQ-3_IXBF_ZqGV-mOk8",
            authDomain: "creta-30c69.firebaseapp.com",
            projectId: "creta-30c69",
            storageBucket: "creta-30c69.firebasestorage.app",
            messagingSenderId: "126716257571",
            appId: "1:126716257571:web:33dfd5dbd1bcdb7a229896"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
        Kakao.init('YOUR_KAKAO_APP_KEY'); // ì‹¤ì œ ì•± í‚¤ë¡œ êµì²´ í•„ìš”

        window.auth = auth;
        window.db = db;
        window.storage = storage;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.GoogleAuthProvider = GoogleAuthProvider;
        window.signInWithPopup = signInWithPopup;
        window.onAuthStateChanged = onAuthStateChanged;
        window.signOut = signOut;
        window.updateProfile = updateProfile;
        window.collection = collection;
        window.addDoc = addDoc;
        window.getDocs = getDocs;
        window.doc = doc;
        window.setDoc = setDoc;
        window.serverTimestamp = serverTimestamp;
        window.query = query;
        window.orderBy = orderBy;
        window.where = where;
        window.onSnapshot = onSnapshot;
        window.updateDoc = updateDoc;
        window.increment = increment;
        window.ref = ref;
        window.uploadBytes = uploadBytes;
        window.getDownloadURL = getDownloadURL;
        window.Kakao = Kakao;

        setTimeout(() => {
            document.getElementById('loadingScreen').style.display = 'none';
        }, 2000);

        onAuthStateChanged(auth, (user) => {
            if (user) {
                updateUserInterface(user);
                showMainApp();
                loadAllHomeSections();
                initializeCommunities();
                initializeChatRooms();
            } else {
                showAuthModal();
                resetUserInterface();
            }
        });

        function showMainApp() {
            document.getElementById('authModal').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
        }

        function updateUserInterface(user) {
            const userAvatarText = document.getElementById('userAvatarText');
            const logoutBtn = document.querySelector('.logout-btn');
            const welcomeUserName = document.getElementById('welcomeUserName');
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');
            const profileAvatar = document.getElementById('profileAvatar');
            
            const displayName = user.displayName || user.email.split('@')[0];
            const firstChar = displayName.charAt(0).toUpperCase();
            
            if (userAvatarText) userAvatarText.textContent = firstChar;
            if (logoutBtn) logoutBtn.style.display = 'inline-block';
            if (welcomeUserName) welcomeUserName.textContent = displayName;
            if (profileName) profileName.textContent = displayName;
            if (profileEmail) profileEmail.textContent = user.email;
            if (profileAvatar) profileAvatar.textContent = firstChar;
        }

        function resetUserInterface() {
            const userAvatarText = document.getElementById('userAvatarText');
            const logoutBtn = document.querySelector('.logout-btn');
            
            if (userAvatarText) userAvatarText.textContent = 'ë¡œê·¸ì¸';
            if (logoutBtn) logoutBtn.style.display = 'none';
            
            document.getElementById('mainApp').style.display = 'none';
        }

        // í™ˆ ì„¹ì…˜ ë¡œë“œ
        async function loadAllHomeSections() {
            await loadWorks();
            await loadTrendingWorks();
            await loadSteadyWorks();
            await loadWeeklyBestWorks();
        }

        async function loadWorks() {
            try {
                const worksQuery = query(collection(db, 'works'), orderBy('createdAt', 'desc'));
                const querySnapshot = await getDocs(worksQuery);
                const worksContainer = document.getElementById('latestWorksContainer');
                
                if (worksContainer && !querySnapshot.empty) {
                    worksContainer.innerHTML = '';
                    
                    querySnapshot.forEach((doc) => {
                        const work = { id: doc.id, ...doc.data() };
                        const workElement = createWorkElement(work);
                        worksContainer.appendChild(workElement);
                    });
                }
            } catch (error) {
                console.error('ì‘í’ˆ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        async function loadTrendingWorks() {
            // ìƒ˜í”Œ ë°ì´í„°ë¡œ íŠ¸ë Œë”© ì‘í’ˆ í‘œì‹œ
            const trendingContainer = document.getElementById('trendingWorksContainer');
            if (trendingContainer) {
                trendingContainer.innerHTML = generateSampleWorks('trending');
            }
        }

        async function loadSteadyWorks() {
            // ìƒ˜í”Œ ë°ì´í„°ë¡œ ìŠ¤í…Œë””ì…€ëŸ¬ ì‘í’ˆ í‘œì‹œ
            const steadyContainer = document.getElementById('steadyWorksContainer');
            if (steadyContainer) {
                steadyContainer.innerHTML = generateSampleWorks('steady');
            }
        }

        async function loadWeeklyBestWorks() {
            // ìƒ˜í”Œ ë°ì´í„°ë¡œ ì£¼ê°„ ë² ìŠ¤íŠ¸ ì‘í’ˆ í‘œì‹œ
            const weeklyContainer = document.getElementById('weeklyBestContainer');
            if (weeklyContainer) {
                weeklyContainer.innerHTML = generateSampleWorks('weekly');
            }
        }

        function generateSampleWorks(type) {
            const sampleTitles = {
                trending: ['í•˜ì´í!! ì‹ ì‘ íŒ¬ì•„íŠ¸', 'ì§„ê²©ì˜ê±°ì¸ ìµœì¢…í™”', 'ì›í”¼ìŠ¤ 1000í™” ê¸°ë…'],
                steady: ['ë‚˜ë£¨í†  í´ë˜ì‹', 'ê·€ë©¸ì˜ì¹¼ë‚  ì¸ê¸°ì‘', 'ì›í”¼ìŠ¤ ëª…ì¥ë©´'],
                weekly: ['ì´ì£¼ì˜ HOT', 'ë² ìŠ¤íŠ¸ ì¼ëŸ¬ìŠ¤íŠ¸', 'ì¸ê¸° ì†Œì„¤']
            };
            
            const titles = sampleTitles[type] || sampleTitles.trending;
            
            return titles.map((title, index) => `
                <div class="work-item" onclick="showWorkDetail(${index})">
                    <img src="https://via.placeholder.com/200x160/1f2937/f3f4f6?text=Sample+${index + 1}" 
                         alt="${title}" class="work-thumbnail" loading="lazy">
                    <div class="work-content">
                        <h3>${title}</h3>
                        <div class="work-author">ìƒ˜í”Œ ì‘ê°€</div>
                        <div class="work-category">ğŸ¨ ì¼ëŸ¬ìŠ¤íŠ¸</div>
                        <div class="work-stats">
                            <span>â¤ï¸ ${Math.floor(Math.random() * 1000)}</span>
                            <span>ğŸ‘€ ${Math.floor(Math.random() * 5000)}</span>
                        </div>
                        <div class="work-tags">
                            <span class="tag">#ìƒ˜í”Œ</span>
                            <span class="tag">#í…ŒìŠ¤íŠ¸</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function createWorkElement(work, isUserWork = false) {
            const workDiv = document.createElement('div');
            workDiv.className = 'work-item';
            workDiv.innerHTML = `
                <img src="${work.imageUrl || 'https://via.placeholder.com/200x160/1f2937/f3f4f6?text=No+Image'}" 
                     alt="${work.title}" class="work-thumbnail" loading="lazy">
                <div class="work-content">
                    <h3>${work.title}</h3>
                    <div class="work-author">${work.authorName}</div>
                    <div class="work-category">${getCategoryIcon(work.category)} ${getCategoryName(work.category)}</div>
                    <div class="work-stats">
                        <span>â¤ï¸ ${work.likes || 0}</span>
                        <span>ğŸ‘€ ${work.views || 0}</span>
                    </div>
                    ${work.tags && work.tags.length > 0 ? `
                        <div class="work-tags">
                            ${work.tags.slice(0, 3).map(tag => `<span class="tag">#${tag}</span>`).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
            
            workDiv.addEventListener('click', () => {
                showWorkDetail(work);
            });
            
            return workDiv;
        }

        function getCategoryIcon(category) {
            const icons = {
                'illustration': 'ğŸ¨',
                'animation': 'ğŸ¬',
                'novel': 'ğŸ“š',
                'manga': 'ğŸ“–'
            };
            return icons[category] || 'ğŸ¨';
        }

        function getCategoryName(category) {
            const names = {
                'illustration': 'ì¼ëŸ¬ìŠ¤íŠ¸',
                'animation': 'ì• ë‹ˆë©”ì´ì…˜',
                'novel': 'ì†Œì„¤',
                'manga': 'ë§Œí™”'
            };
            return names[category] || category;
        }

        function showWorkDetail(work) {
            showNotification(`"${work.title || work}" ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤! ğŸ¨`);
        }

        function initializeCommunities() {
            window.initializeCommunities();
        }

        function initializeChatRooms() {
            window.initializeChatRooms();
        }

        window.updateUserInterface = updateUserInterface;
        window.resetUserInterface = resetUserInterface;
        window.loadWorks = loadWorks;
        window.loadAllHomeSections = loadAllHomeSections;
        window.showMainApp = showMainApp;
    </script>

    <script src="script.js"></script>
</body>
</html>
